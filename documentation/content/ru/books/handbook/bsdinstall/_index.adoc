//
// The FreeBSD Russian Documentation Project
//
// Original EN revision (31.05.2024): a3ed3390dae1bc8a89748b1f5169682ebdcee72b
//

---
title: Глава 2. Установка FreeBSD
part: Часть I. Начало работы
prev: books/handbook/introduction
next: books/handbook/basics
description: Руководство о том, как установить FreeBSD, минимальные аппаратные требования и поддерживаемые архитектуры, как подготовить установочный носитель и так далее
tags: ["bsdinstall", "установка FreeBSD", "требования", "учебник", "руководство"]
showBookMenu: true
weight: 4
path: "/books/handbook/bsdinstall/"
---

[[bsdinstall]]
= Установка FreeBSD
:doctype: book
:toc: macro
:toclevels: 1
:icons: font
:sectnums:
:sectnumlevels: 6
:sectnumoffset: 2
:partnums:
:source-highlighter: rouge
:experimental:
:images-path: books/handbook/bsdinstall/

ifdef::env-beastie[]
ifdef::backend-html5[]
:imagesdir: ../../../../images/{images-path}
endif::[]
ifndef::book[]
include::shared/authors.adoc[]
include::shared/mirrors.adoc[]
include::shared/releases.adoc[]
include::shared/attributes/attributes-{{% lang %}}.adoc[]
include::shared/{{% lang %}}/teams.adoc[]
include::shared/{{% lang %}}/mailing-lists.adoc[]
include::shared/{{% lang %}}/urls.adoc[]
toc::[]
endif::[]
ifdef::backend-pdf,backend-epub3[]
include::../../../../../shared/asciidoctor.adoc[]
endif::[]
endif::[]

ifndef::env-beastie[]
toc::[]
include::../../../../../shared/asciidoctor.adoc[]
endif::[]

[[bsdinstall-synopsis]]
== Краткий обзор

FreeBSD поддерживает различные архитектуры, включая amd64, ARM(R), RISC-V(R) и PowerPC(R).
В зависимости от архитектуры и платформы, для установки или непосредственного запуска FreeBSD могут быть link:https://www.freebsd.org/where/[сгружены] различные образы.

Типы образов таковы:

* Образы дисков виртуальных машин, таких как `qcow2`, `vmdk` и `vhd`, а также прямые образы устройств. Они не являются образами для установки, но содержат предустановленную FreeBSD, готовую к выполнению послеустановочных действий. Образы виртуальных машин также широко используются в облачных средах.
* Образы карт памяти SD для интегрированных систем, подобных Raspberry Pi. Такие файлы должны быть распакованы и записаны как прямой образ на карту памяти SD, с которой затем будет загружаться система.
* Установочные образы для загрузки с устройств ISO или USB и установки FreeBSD на диск обычного настольного компьютера, ноутбука или серверной системы.

Остаток этой главы описывает третий вариант и разъясняет, каким образом установить FreeBSD при помощи программы установки с текстовым интерфейсом, которая называется bsdinstall.

Между работой программы установки и тем, что показано здесь, могут быть незначительные расхождения, так что используйте эту главу как общее руководство, а не точную инструкцию.

После прочтения этой главы вы будете знать:

* Как получить файлы образов и создавать установочные носители для FreeBSD.
* Как запустить bsdinstall.
* Вопросы, задаваемые утилитой bsdinstall, что они значат и как на них отвечать.
* Как решать проблемы при сбоях установки.
* Как получить доступ к Live-версии FreeBSD до того, как принять решение о её установке.

[[bsdinstall-hardware]]
== Минимальные аппаратные требования

Требования к оборудованию, необходимому для установки FreeBSD, отличаются между собой и зависят от её версии и архитектуры.
Аппаратные архитектуры и устройства, поддерживаемые каким-либо релизом FreeBSD, перечислены на странице link:https://www.FreeBSD.org/releases/index.html[Информации о релизах FreeBSD].

link:https://www.FreeBSD.org/where.html[Страница сгрузки FreeBSD] также содержит рекомендации по корректному выбору образа для разных архитектур.

[[bsdinstall-pre]]

После того, как было определено, что система соответствует минимальным требованиям к аппаратному обеспечению для установки FreeBSD, необходимо сгрузить установочный файл и подготовить установочный носитель.

[TIP]
====
Если вам требуется использовать FreeBSD на машине с уже установленной операционной системой, рассмотрите возможность использования crossref:virtualization[virtualization,виртуализации].
====

До того, как приступить к установке, проверьте готовность системы к установке по пунктам следующего контрольного списка:

.[procedure]
====
. *Выполните резервное копирование важных данных*
+
Перед тем, как устанавливать любую операционную систему, прежде всего *всегда* выполняйте резервное копирование всех важных данных.
Не храните резервную копию в той же системе, где производится установка.
Напротив, храните данные на сменном диске, вроде USB, в другой системе в сети или в онлайновом сервисе хранения резервных копий.
Проверьте резервную копию до начала установки, чтобы быть уверенным, что в ней содержатся все нужные файлы.
В момент, когда программа установки форматирует диск системы, все данные на этом диске теряются.
. *Определитесь с местом установки FreeBSD*
+
Если FreeBSD будет единственной установленной операционной системой, то этот шаг может быть пропущен.
Однако если FreeBSD будет использовать диск совместно с другими операционными системами, то решите, какой диск или его раздел будет использоваться для FreeBSD.
+
В архитектурах i386 и amd64 диски могут быть разделены на несколько разделов с применением одного из методов разбиения.
Традиционный метод использует MBR (Master Boot Record), в которой хранится таблица разделов, вмещающая до четырёх _первичных_ разделов.
Исторически сложилось так, что во FreeBSD эти разделы называются _слайсами_.
Один из первичных разделов может быть обозначен _расширенным разделом_, содержащим несколько _логических разделов_.
_Таблица разделов GUID_ (GUID Partition Table) является более новым и простым способом деления диска.
Распространённые реализации GPT позволяют создавать до 128 разделов на одном диске, исключая необходимость в логических разделах.
+
Загрузчику FreeBSD необходим либо первичный раздел, либо раздел GPT.
Если все первичные разделы или разделы GPT уже используются, то один из них нужно будет освободить для FreeBSD.
Для создания раздела без удаления существующих данных воспользуйтесь утилитой изменения размеров разделов для того, чтобы уменьшить размер существующего раздела и создать новый раздел, использующий высвободившееся пространство.
+
Альтернативой модификации существующих дисковых разделов является использование crossref:virtualization[virtualization,виртуализации], позволяющей запускать одновременно несколько операционных систем без необходимости изменять дисковые разделы.
+
Различные свободно распространяемые и коммерческие инструменты для изменения размеров разделов перечислены в link:http://en.wikipedia.org/wiki/List_of_disk_partitioning_software[Списке программного обеспечения для управления дисковыми разделами в wikipedia].
link:https://gparted.org/livecd.php[GParted Live] является свободно распространяемым загружаемым CD, который содержит редактор разделов GParted.
+
[WARNING]
======
При правильном их использовании, утилиты уменьшения размера диска могут безопасно формировать пространство для создания новых разделлов
Так как существует вероятность ошибки при выборе раздела, всегда создавайте резервные копии любых важных данных и проверяйте целостность этих копий до того, как модифицировать дисковые разделы.
======
+
Наличие дисковых разделов, содержащих разные операционные системы, делает возможной установку разных операционных систем на один компьютер.
. *Соберите информацию о конфигурации сети*
+
Некоторым вариантам установки FreeBSD для того, чтобы загрузить установочные файлы, требуется наличие соединения с сетью.
После завершения любой установки программа установки предложит настроить сетевые интерфейсы системы.
+
Если в сети присутствует сервер DHCP, то он может быть использован для обеспечения автоматической настройки сетевых параметров.
Если в подключаемой сети сервис DHCP отсутствует, то для настройки сетевых параметров системы у местного сетевого администратора или провайдера Интернет должна быть получена следующая информация:
+
.Необходимые данные о сети
. IP-адрес
. Маска подсети
. IP-адрес шлюза, используемого по умолчанию
. Доменное имя сети
. IP-адреса DNS-серверов сети
+
. *Проверьте сведения об обнаруженных ошибках FreeBSD*
+
Хотя проект FreeBSD борется за то, чтобы каждый релиз FreeBSD был стабильным настолько, насколько это возможно, ошибки порой вкрадываются в процесс разработки.
В очень редких случаях эти ошибки влияют на процесс установки.
По мере обнаружения и исправления этих проблем они описываются в Списке найденных ошибок в каждой версии FreeBSD.
Проверьте этот список перед установкой и убедитесь, что отсутствуют проблемы, которые могут затронуть установку.
+
Информацию о всех релизах и списки найденных ошибок для всех релизов можно найти на странице link:https://www.FreeBSD.org/releases/[Информации о релизах].
====

[[bsdinstall-installation-media]]
=== Подготовка установочного носителя

Программа установки FreeBSD не является приложением, которое можно запустить из другой операционной системы.
Напротив, сгрузите файл установки FreeBSD, запишите его на носитель, соответствующий типу и размеру этого файла (CD, DVD или USB) и выполните загрузку системы для установки со вставленного носителя.

Установочные файлы FreeBSD доступны на link:https://www.FreeBSD.org/where/[Странице скачивания FreeBSD].
Наименование каждого установочного файла включает версию релиза FreeBSD, архитектуру и тип файла.

Установочные файлы доступны в нескольких форматах, как со сжатием man:xz[1], так и без сжатия.
Форматы отличаются между собой и зависят от компьютерной архитектуры и типа носителя.

Типы установочных файлов таковы:

* `*-bootonly.iso*`: Это самый маленький установочный файл, потому что он содержит только программу установки. Во время установки требуется наличие работающего соединения с Интернет, так как программа установки будет сгружать файлы по мере необходимости для завершения установки FreeBSD. Этот файл должен быть прописан на оптический носитель.
* `*-disc1.iso*`: Этот файл содержит все файлы, требуемые для установки FreeBSD, её исходный код и Коллекцию портов. Он должен быть прописан на оптический носитель.
* `*-dvd1.iso*`: Этот файл содержит все файлы, требуемые для установки FreeBSD, её исходный код и Коллекцию портов. Также он содержит набор популярных откомпилированных пакетов для установки оконных менеджеров и некоторых приложений, так что полноценная система может быть установлена с носителя без необходимости в подключении к Интернет. Этот файл должен быть прописан на оптический носитель.
* `*-memstick.img*`: Этот файл содержит все файлы, требуемые для установки FreeBSD, её исходный код и Коллекцию портов. Пропишите его на USB-носитель, как это описано в <<bsdinstall-usb>>.
* `-mini-memstick.img`: Подобно `*-bootonly.iso*`, не содержит установочные файлы, но скачивает их по мере необходимости. Во время установки требуется работающее соединение с Интернет. Он должен быть прописан на USB-носитель, как это описано в <<bsdinstall-usb>>.

После сгрузки файла с образом скачайте по крайней мере один файл c _контрольной суммой_ из того же каталога.
Доступны два файла с _контрольными суммами_, которые именуются в соответствии с номером релиза и названием архитектуры.
К примеру, `CHECKSUM.SHA256-FreeBSD-13.1-RELEASE-amd64` и `CHECKSUM.SHA512-FreeBSD-13.1-RELEASE-amd64`.

После сгрузки одного (или обоих) из этих файлов подсчитайте _контрольную сумму_ файла с образом и сравните её с той, что указана в файле с _контрольной суммой_.
Заметьте, что вам нужно сравнивать подсчитанную _контрольную сумму_, используя корректный файл, так как файлы соответствуют разным алгоритмам: SHA256 и SHA512.
Во FreeBSD имеются man:sha256[1] и man:sha512[1], которые могут использоваться для подсчёта _контрольной суммы_.
В других операционных системах имеются похожие программы.

Проверка _контрольной суммы_ во FreeBSD может быть осуществлена автоматически при помощи запуска команды man:sha256sum[1] (и man:sha512sum[1]):

[source,shell]
....
% sha256sum -c CHECKSUM.SHA256-FreeBSD-13.1-RELEASE-amd64 FreeBSD-13.1-RELEASE-amd64-dvd1.iso
FreeBSD-13.1-RELEASE-amd64-dvd1.iso: OK
....

Контрольные суммы должны быть полностью идентичными.
Несовпадение контрольных сумм означает, что файл образа повреждён и должен быть сгружен повторно.

[[bsdinstall-usb]]
==== Запись файла образа на USB

Файл `\*memstick.img` является _образом_ всего содержимого флеш-накопителя.
Его _нельзя_ просто скопировать на целевое устройство как файл.
Для записи `*.img` на флеш-накопитель USB имеется несколько приложений.
Этот раздел описывает две такие утилиты.

[IMPORTANT]
====
Перед тем, как продолжить, выполните резервное копирование всех важных данных, находящихся на флеш-накопителе USB.
Данная процедура удалит данные, имеющиеся на накопителе.
====

[[bsdinstall-usb-dd]]
[.procedure]
====
*Procedure. Использование команды `dd` для записи образа* +

[WARNING]
======
В этом примере в качестве устройства, на которое производится запись, используется `/dev/da0`.
Будьте *очень внимательны* к корректности указания устройства, так как эта команда уничтожит данные, находящиеся на указываемом целевом устройстве.
======

. Утилита командной строки man:dd[1] имеется в системах BSD, Linux и Mac OS(R).
Для записи образа при помощи `dd` вставьте флеш-накопитель USB и определите имя соответствующего устройства.
Затем задайте имя сгруженного установочного файла и имя устройства флеш-накопителя.
В этом примере установочный образ amd64 записывается на первое устройство USB в существующей системе FreeBSD.
+
[source,shell]
....
# dd if=FreeBSD-13.1-RELEASE-amd64-memstick.img of=/dev/da0 bs=1M conv=sync
....
+
Если запуск этой команды завершится неудачно, удостоверьтесь в том, что флеш-накопитель USB не смонтирован и имя устройства соответствует диску, а не дисковому разделу.
+
В некоторых операционных системах может потребоваться запуск этой команды при помощи man:sudo[8].
Синтаксис команды man:dd[1] на разных платформах несколько отличается; к примеру, Mac OS(R) требует указания параметра `bs=1m` в нижнем регистре.
Системы, подобные Linux(R), могут буферизировать операции записи.
Для принудительного завершения всех операций записи воспользуйтесь командой man:sync[8].
====

[.procedure]
====
*Procedure: Использование Windows(R) для записи образа* +

[WARNING]
======
Удостоверьтесь в правильности выбора буквы диска, так как имеющиеся данные будут перезаписаны и уничтожены.
======

. *Получение Image Writer для Windows(R)*
+ 
Image Writer для Windows(R) - это свободно распространяемое приложение, при помощи которого можно корректно записать файл образа на флеш-накопитель.
Скачайте его с https://https://sourceforge.net/projects/win32diskimager/[Домашней страницы win32diskimager] и распакуйте в любой каталог.

. *Запись образа при помощи Image Writer*
+
Щёлкните дважды на иконке Win32DiskImager для запуска приложения. Удостоверьтесь, что буква диска, отображаемая в боксе `Device`, соответствует устройству флеш-накопителя. Кликните на иконке с папкой и выберите образ, который будет записан на флеш-накопитель. Нажмите кнопку btn:[Save] для подтверждения выбора имени файла. Проверьте, что всё верно, а также что нет открытых директорий с флеш-накопителя в других окнах. Когда всё готово, нажмите кнопку btn:[Write] для записи образа на флеш-накопитель.
====

[[bsdinstall-start]]
== Начало установки

[IMPORTANT]
====
По умолчанию, программа установки не вносит никаких изменений в данные на дисках до следующего сообщения:

[.programlisting]
....
Your changes will now be written to disk. If you
have chosen to overwrite existing data, it will
be PERMANENTLY ERASED. Are you sure you want to
commit your changes?
....

Из программы установки можно выйти в любой момент до появления этого предупреждения.
Если ощущается неуверенность в правильности настроек, просто выключите компьютер до этого сообщения, и тогда не будет сделано никаких изменений на дисках системы.
====

Этот раздел описывает, как выполнить загрузку системы с установочного носителя, который был ранее подготовлен по инструкциям в <<bsdinstall-installation-media>>.
При использовании загрузочной флешки USB подключите её в разъём USB до включения компьютера.
При загрузке с CD или DVD включите компьютер и вставьте носитель при первой возможности.
Порядок настройки системы на загрузку с вставленного носителя зависит от архитектуры.

[[bsdinstall-view-probe]]
=== Меню загрузчика FreeBSD

Как только система загрузится с установочного носителя, будет отображено меню, подобное следующему:

[[bsdinstall-newboot-loader-menu]]
.Меню загрузчика FreeBSD
image::bsdinstall-newboot-loader-menu.png[Меню загрузчика FreeBSD]

По умолчанию это меню будет ожидать пользовательского ввода в течение десяти секунд до загрузки программы установки FreeBSD или, если FreeBSD уже установлена, запустит FreeBSD.
Чтобы приостановить таймер загрузки для просмотра возможных вариантов, нажмите kbd:[Space].
Для выбора варианта нажмите соответствующий подсвеченный номер, букву или клавишу.
К выбору доступны следующие варианты:

* `Boot Multi User`: Продолжит процесс загрузки FreeBSD. Если таймер загрузки был приостановлен, то нажмите kbd:[1], kbd:[B] (в верхнем или нижнем регистре) или kbd:[Enter].
* `Boot Single User`: Этот режим может использоваться для проведения аварийных работ на существующей инсталляции FreeBSD, как описано в <<boot-singleuser>>. Нажмите kbd:[2] или kbd:[S] (в верхнем или нижнем регистре) для перехода в этот режим.
* `Escape to loader prompt`: Загрузит систему в режим командной строки аварийного режима, который содержит ограниченный набор низкоуровневых команд. Этот режим описан в <<boot-loader>>. Нажмите kbd:[3] или kbd:[Esc] для перехода в этот режим.
* `Reboot`: Выполняет перезагрузку системы.
* `Cons`: Позволяет продолжить установку в режимах `video`, `serial`, `Dual (serial primary)` или `Dual (Video primary)`
* `Kernel`: Загружает другое ядро.
* `Boot Options`: Открывает режим меню, показанный и описанный в <<bsdinstall-boot-options-menu>>.

[[bsdinstall-boot-options-menu]]
.Меню параметров загрузки FreeBSD
image::bsdinstall-boot-options-menu.png[Меню, показывающее различные поддерживаемые параметры загрузки]

Меню параметров загрузки разделено на две секции.
Первая секция может использоваться либо для возврата к основному меню загрузки, либо для сброса любых выбранных параметров к их первоначальным значениям, используемым по умолчанию.

Следующая секция используется для переключения значений доступных параметров в состояние `On` или `Off` нажатием подсвеченного номера или символа, соответствующих параметру.
При загрузке система всегда будет использовать значения этих параметров, пока они не будут изменены.
При помощи этого меню может быть переключить значения нескольких параметров:

* `ACPI Support`: Если при загрузке система "зависает", попробуйте переключить значение этого параметра в `Off`. Этот параметр присутствует при наличии поддержки ACPI, но не является необходимым.
* `Safe Mode`: Если система продолжает "зависать" во время загрузки даже при значении параметра `ACPI Support`, установленного в `Off`, попробуйте установить значение данного параметра в `On`.
* `Single User`: Переключите значение этого параметра в `On` для проведения аварийных работ существующей инсталляции FreeBSD, как это описано в <<boot-singleuser>>. После устранения проблемы верните этот параметр в значение `Off`.
* `Verbose`: Переведите значение этого параметра в `On` для просмотра более детализированных сообщений во время процесса загрузки. Это может быть полезным при устранении проблем с каким-либо оборудованием.

После выбора необходимых параметров нажмите kbd:[1] или kbd:[Backspace] для возврата к основному меню загрузки, а затем нажмите kbd:[Enter] для продолжения загрузки FreeBSD.
По мере того, как FreeBSD будет выполнять обнаружение устройств и загрузку программы установки, будут выдаваться соответствующие сообщения загрузки.
После завершения загрузки будет выдано начальное меню, показанное в <<bsdinstall-choose-mode>>.

[[bsdinstall-choose-mode]]
.Приветственное меню
image::bsdinstall-choose-mode.png[Приветственное меню установки FreeBSD]

Нажмите kbd:[Enter] для подтверждения выбранного по умолчанию режима btn:[Install] и перехода в программу установки.
Оставшаяся часть этой главы описывает порядок использования программы установки.
Либо воспользуйтесь клавишами навигации влево и вправо или буквой, выделенной цветом, для выбора нужного пункта меню.
Пункт btn:[Shell] может быть использован для обращения к оболочке командной строки FreeBSD и вызова утилит командной строки с целью подготовки дисков до установки.
Пункт btn:[Live CD] можно использовать для ознакомления с FreeBSD до её установки.
Загружаемая версия описана в <<using-live-cd>>.

[TIP]
====
Для просмотра сообщений, выданных при загрузке, в том числе при распознавании устройств, нажмите kbd:[S] в верхнем или нижнем регистре, а затем kbd:[Enter] для доступа к оболочке командной строки.
В приглашении оболочки наберите `more /var/run/dmesg.boot` и используйте клавишу пробела для пролистывания сообщений.
По завершению наберите `exit` для возврата к начальному меню.
====

[[using-bsdinstall]]
== Использование bsdinstall

В этом разделе описаны последовательность меню bsdinstall и виды информации, которая будет запрашиваться перед установкой системы.
Используйте клавиши навигации для подсветки вариантов выбора, а затем kbd:[Пробел] для выбора или отказа от выбора соответствующего пункта меню.
После завершения выбора нажмите клавишу kbd:[Ввод] для сохранения выбора и перехода на следующий экран.

[[bsdinstall-keymap]]
=== Меню выбора раскладки клавиатуры

Перед тем, как продолжить работу, bsdinstall загрузит файлы с раскладками клавиатуры, как это показано в <<bsdinstall-keymap-loading>>.

[[bsdinstall-keymap-loading]]
.Загрузка раскладки клавиатуры
image::bsdinstall-keymap-loading.png[Загрузка раскладки клавиатуры]

После загрузки раскладок клавиатуры bsdinstall отображает меню, изображённое на <<bsdinstall-keymap-10>>.
Используйте клавиши навигации вверх и вниз для выбора раскладки, которая в наибольшей степени соответствует раскладке клавиатуры, подключенной к системе.
Нажмите kbd:[Enter] для сохранения выбора. 

[[bsdinstall-keymap-10]]
.Меню выбора раскладки клавиатуры
image::bsdinstall-keymap-10.png[Меню выбора раскладки клавиатуры, отображающее все поддерживаемые клавиатуры]

[NOTE]
====
Нажатие kbd:[Esc] приведёт к выходу из этого меню и использованию раскладки, применяемой по умолчанию.
Если выбор раскладки клавиатуры вызывает затруднения, то ещё одним безопасным вариантом является использование [.guimenuitem]#United States of America ISO-8859-1#.
====

Кроме того, при выборе другой раскладки клавиатуры пользователь может попробовать её в действии и удостовериться в том, что она корректна, до продолжения работы, как это показано в <<bsdinstall-keymap-testing>>.

[[bsdinstall-keymap-testing]]
.Меню проверки раскладки клавиатуры
image::bsdinstall-keymap-testing.png[Меню проверки раскладки клавиатуры]

[[bsdinstall-hostname]]
=== Настройка имени машины

Следующее меню <application>bsdinstall</application> используется для указания имени машины для свежеустанавливаемой системы.

[[bsdinstall-config-hostname]]
.Установка имени машины
image::bsdinstall-config-hostname.png[Установка имени машины]

Введите имя машины, уникальное для сети.
Оно должно быть полным, например: `machine3.example.com`.

[[bsdinstall-components]]
=== Выбор устанавливаемых компонентов

Далее, bsdinstall предложит выбрать дополнительные компоненты для установки.

[[bsdinstall-config-components]]
.Выбор устанавливаемых компонентов
image::bsdinstall-config-components.png[Различные компоненты, которые могут быть установлены. Например, base-dbg, lib32, ports и так далее]

Определение перечня компонентов для установки в наибольшей мере зависит от планируемого использования системы и от количества доступного дискового пространства.
Ядро и набор пользовательских утилит FreeBSD, вместе называемые _базовой системой_, устанавливаются всегда.
В зависимости от архитектуры, некоторые из следующих компонентов могут не отображаться:

* `base-dbg` - Базовые инструменты, такие как cat и ls, помимо всех прочих, с активированной отладочной информацией.
* `kernel-dbg` - Ядро и модули с активированной отладочной информацией.
* `lib32-dbg` - Библиотеки совместимости для запуска 32-разрядных приложений в 64-разрядной версии FreeBSD с активированной отладочной информацией.
* `lib32` - Библиотеки совместимости для запуска 32-битных приложений на 64-битных версиях FreeBSD.
* `ports` - Коллекция портов FreeBSD представляет собой набор файлов, при помощи которых автоматизируется сгрузка, компиляция и установка программных пакетов сторонних разработчиков. В <<ports>> описывается, как использовать Коллекцию портов.
+
[WARNING]
====
Программа установки не проверяет наличие достаточного свободного пространства.
Выбирайте эту опцию лишь в случае, когда имеется достаточно свободного места на жёстком диске.
Коллекция Портов занимает около {ports-size} дискового пространства.
====

* `src` - Полный исходный код FreeBSD, как ядра, так и пользовательских программ. Хотя для большинства задач исходный код системы не нужен, он может потребоваться для построения драйверов устройств, модулей ядра или некоторых программ из Коллекции портов. Он также используется для разработки самой FreeBSD. Полное дерево исходных кодов требует 1 ГБ дискового пространства, а пересборка всей системы FreeBSD потребует ещё 5 ГБ.
* `tests` - Пакет тестирования FreeBSD.

[[bsdinstall-netinstall]]
=== Установка из сети

Меню, изображённое в <<bsdinstall-netinstall-notify>>, появляется только при установке с `-bootonly.iso` или `-mini-memstick.img`, так как эти установочные образы не содержат копий установочных файлов.
Так как получение установочных файлов должно выполняться через сетевое соединение, это меню указывает на то, что сначала должен быть настроен сетевой интерфейс.
Если это меню появляется на любом шаге процесса, не забывайте следовать инструкциям из <<bsdinstall-config-network-dev>>.

[[bsdinstall-netinstall-notify]]
.Установка из сети
image::bsdinstall-netinstall-files.png[Показывает, что определённые компоненты не были найдены и будут сгружены по сети.]

[[bsdinstall-partitioning]]
== Распределение дискового пространства

Следующее меню используется для задания метода распределения дискового пространства.

[[bsdinstall-zfs-partmenu]]
.Варианты распределения
image::bsdinstall-zfs-partmenu.png[Отображает различные варианты распределения разделов. К примеру, Manual, Shell и так далее.]

bsdinstall предлагает пользователю четыре способа распределения дискового пространства:

* Распределение `Auto (ZFS)` создаёт корневую файловую систему в формате ZFS с опциональной поддержкой  шифрования GELI для _загрузочных сред_.
* Распределение `Auto (UFS)` автоматически настраивает разделы диска с использованием файловой системы `UFS`.
* Распределение `Manual` позволяет опытным пользователям создавать разделы в соответствии с собственными требованиями, используя варианты из меню.
* Распределение `Shell` запускает оболочку командного процессора, в котором опытные пользователи могут создавать разделы в соответствии с собственными требованиями, используя утилиты командной строки, подобные man:gpart[8], man:fdisk[8] и man:bsdlabel[8].

В этом разделе описываются факторы, которые необходимо учитывать при разбиения диска на разделы.
Затем в нём показывается, как использовать различные методы распределения дискового пространства.

[[configtuning-initial]]
=== Планирование размещения разделов

Распределение разделов для размещения файловых систем, применяемое по умолчанию, предусматривает одну файловую систему для всей системы.
При использовании `UFS` может быть целесообразным рассмотрение использования нескольких файловых систем при наличии достаточного дискового пространства или нескольких дисков.
При размещении файловых систем помните, что жёсткие диски передают данные быстрее от внешних дорожек к внутренним.
Таким образом, файловые системы меньшего размера и высоконагруженные файловые системы должны быть ближе к внешней границе накопителя, тогда как более крупные разделы, подобные `/usr`, должны размещаться ближе к центру диска.
Хорошей идеей является создание разделов примерно в следующем порядке: `/`, пространство подкачки, `/var` и `/usr`.

Размер раздела `/var` отражает предполагаемое использование машины.
Этот раздел используется для размещения почтовых ящиков, файлов журналирования событий и очередей печати.
Почтовые ящики и файлы журналов могут расти до непрогнозируемых размеров в зависимости от количества пользователей и того, как долго хранятся файлы журналов.
В среднем большинству пользователей редко требуется более одного гигабайта свободного дискового пространства в `/var`.

[NOTE]
====
Иногда возникает потребность в большом объёме дискового пространства для `/var/tmp`.
Когда устанавливается новое программное обеспечение, инструменты работы с пакетами разворачивают их временную копию в каталоге `/var/tmp`.
При установке больших пакетов програмного обеспечения, подобных Firefox или LibreOffice, могут возникнуть сложности, если в каталоге `/var/tmp` будет недостаточно дискового пространства.

Раздел `/usr` содержит многие из файлов, обеспечивающих поддержку системы, включая Коллекцию портов FreeBSD и исходный код системы.
Рекомендуемое пространство для этого раздела составляет по меньшей мере 2 гигабайта.
Кроме того, заметьте, что домашние каталоги для пользователей по умолчанию располагаются в `/usr/home`, однако могут размещаться в другом разделе.
По умолчанию `/home` является символической ссылкой на `/usr/home`.

При определении размеров разделов помните о требованиях к дисковому пространству.
Исчерпание пространства одного раздела и слабое его использование в другом может стать неприятным фактом.

Общее правило заключается в том, что размер раздела подкачки должен быть примерно в два раза больше объёма оперативной памяти (ОЗУ).
Системы с минимальным объёмам ОЗУ (в меньшей степени для конфигураций с большим объёмом оперативной памяти) могут работать лучше при увеличении размера памяти подкачки.
Настройка слишком малого объёма памяти подкачки может приводить к неэффективной работе кода сканирования страниц VM и может создать проблемы позже при добавлении дополнительной памяти.

В более крупных системах с несколькими дисками SCSI или IDE, подключёнными к разным контроллерам, рекомендуется создавать разделы подкачки на каждом диске, вплоть до четырёх дисков.
Размер разделов подкачки должен быть примерно одинаковым.
Ядро может обрабатывать любые размеры, однако внутренние структуры данных рассчитываются, исходя из 4-кратного размера самого большого раздела подкачки.
Сохранение разделов подкачки примерно одинаковыми по размеру позволит оптимально распределять пространство подкачки между дисками.
Большой объём пространства подкачки может приводить к появлению предупреждающего сообщения ядра об общем размере настроенного пространства подкачки.
Это ограничение увеличивается за счёт увеличения объёма памяти, разрешённого для отслеживания распределений пространства подкачки, как указывается в предупреждающем сообщении.
Также это может облегчить восстановление нормальной работы в результате потери управления над каким-либо приложением до того, как возникнет необходимость в перезапуске системы.

При корректном планировании разделов системы фрагментация, появляющаяся в разделх меньшего размера с большим объёмом операций записи, не будет влиять на разделы, где преимущественно осуществляются операции чтения.
Размещение разделов с большим объёмом операций записи ближе к краю диска увеличит производительность операций ввода-вывода для разделов, где они случаются чаще всего.
Хотя производительность ввода-вывода в более крупных разделах может быть востребована, перемещение их ближе к краю диска не приведёт к существенному росту производительности по сравнению с перемещением туда раздела `/var`.

[[bsdinstall-part-guided]]
=== Шаблонное распредение с использованием UFS

При выборе этого метода в меню будут отображены доступные диски (или один диск).
Если в системе подключено несколько дисков, то выберите один, на который будет устанавливаться FreeBSD.

[[bsdinstall-part-guided-disk]]
.Выбор из множества дисков
image::bsdinstall-part-guided-disk.png[Отображает список дисков, на которые может быть установлена FreeBSD]

После выбора диска следующее меню запрашивает выбор установки с использованием всего диска либо с созданием раздела в свободном пространстве.
Если выбирается вариант btn:[Entire Disk], то автоматически выполняется стандартное распределение, занимающее весь диск. Выбор btn:[Partition] приводит к созданию разделов из неиспользуемого дискового пространства.

[[bsdinstall-part-entire-part]]
.Выбор всего диска или раздела
image::bsdinstall-part-entire-part.png[Меню, запрашивающего у пользователя, хочет ли он использовать всё доступное пространство на диске или создать раздел]

После выбора варианта btn:[Entire Disk] программа установки bsdinstall отображает диалоговое окно, указывающее на то, что диск будет очищен.

[[bsdinstall-ufs-warning]]
.Подтверждение
image::bsdinstall-ufs-warning.png[Меню, указывающее пользователю на то, что все данные на диске будут удалены, и запрашивающее подтверждение]

Последующее меню содержит список доступных типов схем разделов.
Как правило, GPT является самым подходящим вариантом для компьютеров amd64.
Более старые компьютеры, не являющиеся совместимыми с GPT, должны использовать  MBR.
Прочие схемы разделов обычно используются с редко встречающимися или более старыми компьютерами.
Дополнительная информацию можно найти в <<partition-schemes>>.

[[bsdinstall-ufs-scheme]]
.Выбор схемы раздела
image::bsdinstall-part-manual-partscheme.png[Меню, демонстрирующее пользователю различные существующие типы разделов и запрашивающее выбор одного из них]

После завершения планирования дискового пространства внимательно проанализируйте результат на предмет соответствия задачам данной инсталляции.
Выбор btn:[Revert] сбросит состояние разделов к их исходному состоянию.
Нажатие btn:[Auto] приведёт к автоматическому пересозданию разделов FreeBSD.
Также разделы могут быть созданы, изменены или удалены вручную.
Если результат разбиения корректен, выберите btn:[Finish] для продолжения установки.

[[bsdinstall-part-review]]
.Просмотр созданных разделов
image::bsdinstall-part-review.png[Меню, отображающее созданные разделы]

После завершения конфигурации дискового пространства следующее меню предоставляет последний шанс для внесения изменений до того, как выбранные диски будут отформатированы.
Если требуется внести изменения, выберите btn:[Back] для возврата к основному меню распределения дискового пространства.
btn:[Revert & Exit] приведёт к выходу из программы установки без внесения каких-либо изменений на диск.
Либо выберите btn:[Commit] для запуска процесса установки.

[[bsdinstall-ufs-final-confirmation]]
.Окончательное подтверждение
image::bsdinstall-final-confirmation.png[Меню, указывающее пользователю на то, что все изменения будут записаны на диск, и информирующее об безвозвратном удалении существующих данных, если он решит продолжать.]

Для продолжения процедуры установки перейдите к <<bsdinstall-fetching-distribution>>.

[[bsdinstall-part-manual]]
=== Ручное (manual) разбиение

При выборе этого метода запускается редактор разделов.

[[bsdinstall-part-manual-create]]
.Ручное создание разделов
image::bsdinstall-part-manual-create.png[Меню, демонстрирующее Редактор разделов.]

Пометьте диск для установки (в этом примере `ada0`) и выберите btn:[Create] для отображения меню с перечнем доступных схем разделов:

[[bsdinstall-part-manual-partscheme]]
.Выбор схемы разбиения
image::bsdinstall-part-manual-partscheme.png[Меню, демонстрирующее различные виды схем разделов]

Как правило, схема GPT является наиболее подходящей для компьютеров amd64.
Для более старых компьютеров, несовместимых с GPT, нужно использовать MBR.
Остальные схемы разбиения разделов в общем используются для редких или старых вычислительных систем.

[[partition-schemes]]
.Схемы разделов
[cols="25h,~", frame="none", options="header"]
|===
<| Обозначение
<| Описание

|APM
|Карта разделов Apple, используемая в PowerPC(R).

|BSD
|Схема разделов BSD без MBR, иногда называемая _опасный эксклюзивный режим_, так как дисковые утилиты не из мира BSD могут его не распознать.

|GPT
|link:https://en.wikipedia.org/wiki/GUID_Partition_Table[Таблица разделов GUID].

|MBR
|link:https://en.wikipedia.org/wiki/Master_boot_record[Master Boot Record].
|===

После того, как схема разделов определена и создана, выберите btn:[Create] повторно для создания дисковых разделов.
Для перемещения фокуса на поля ввода используется клавиша kbd:[Tab] (после циклического перехода между btn:[<OK>], btn:[<Options>] и btn:[<Cancel>]).

[[bsdinstall-part-manual-addpart]]
.Создание новых разделов в режиме ручного управления
image::bsdinstall-part-manual-addpart.png[Меню, запрашивающее тип, размер, точку монтирования и метку для нового раздела.]

В стандартной установке FreeBSD со схемой GPT используются как минимум три раздела, включая UFS или ZFS:

* `freebsd-boot` или `efi` - Содержит загрузочный код FreeBSD.
* `freebsd-ufs` - Файловая система FreeBSD формата UFS.
* `freebsd-zfs` - Файловая система FreeBSD формата ZFS. Дополнительная информация о ZFS находится в <<zfs>>.
* `freebsd-swap` - Пространство подкачки FreeBSD.

Обратитесь к man:gpart[8] для получения описаний доступных типов разделов GPT.

Возможно создание большего количества разделов с файловыми системами.
Некоторые предпочитают традиционное распределение с отдельными разделами для `/`, `/var`, `/tmp` и `/usr`.

[TIP]
====
Заметьте, что в системах с достаточным объёмом оперативной памяти `/tmp` можно добавить позже в виде файловой системы, размещающейся в оперативной памяти (man:tmpfs[5]).
====

Пример можно найти в <<bsdinstall-part-manual-splitfs>>.

В качестве параметра `Size` при указании размеров допускается использование общепринятых аббревиатур, таких как _K_ для килобайт, _M_ для мегабайт, или _G_ для гигабайт.

[TIP]
====
Должное выравнивание секторов обеспечивает наилучшую производительность, а создание разделов с размерами, кратными 4 Кбайт, помогает обеспечить правильное выравнивание как на дисках с размером сектора 512 байт, так и на устройствах с размером сектора 4 Кбайт.
Вообще говоря, задание размеров, кратных 1 Мбайт или 1 Гбайт - это наиболее простой способ выполнить выравнивание начал разделов на позицию, кратную 4 Кбайт.
Имеется одно исключение: размер раздела _freebsd-boot_ не должен превышать 512 Кбайт из-за текущих ограничений загрузочного кода.
====

В случае, если раздел будет содержать файловую систему, ей потребуется `точка монтирования`.
Если будет создаваться только один раздел UFS, то точкой монтирования должен быть `/`.

`Метка` является именем, под которым будет распознаваться раздел.
Имя устройства или его номер может измениться если устройство будет подключено к другому контроллеру или порту, а метка раздела останется неизменной.
Ссылки на метки вместо имён устройств и номеров разделов в файлах типа `/etc/fstab` делают систему менее чувствительной к замене оборудования.
Метки GPT появляются в каталоге `/dev/gpt/` при подключении дисков.
У других схем разделов есть свои особенности поддержки меток, и их метки располагаются в других подкаталогах каталога `/dev/`.

[TIP]
====
Во избежание конфликта идентичных меток используйте уникальные названия меток для каждого раздела.
К метке можно добавить несколько букв, взятых от имени компьютера, его назначения или местоположения.
Например, используйте `labroot` или `rootfslab` для корневого раздела UFS компьютера с наименованием `lab`.
====

[[bsdinstall-part-manual-splitfs]]
.Создание разделов для традиционного разбиения на отдельные файловые системы.
[example]
====
Для традиционного разбиения, в котором каталоги `/`, `/var`, `/tmp` и `/usr` представляют собой отдельные файловые системы на их собственных разделах, создайте схему разделов GPT, потом создайте разделы, как это указано ниже.
Показанные размеры разделов являются типичными для жесткого диска размером 20Гб.
Если на целевом диске доступно больше пространства, то будет уместным отвести больше места для раздела подкачки или для раздела с файловой системой `/var`.
Задействованные в этом примере метки имеют префикс `ex`, от слова "example", вам же рекомендуется использовать другие уникальные имена меток.

По умолчанию загрузчик `gptboot` FreeBSD ожидает, что первый найденный раздел UFS будет разделом для `/`.

[.informaltable]
[cols="1,1,1,1", frame="none", options="header"]
|===
| Тип раздела
| Размер
| Точка монтирования
| Метка

|`freebsd-boot`
|`512K`
|
|

|`freebsd-ufs`
|`2G`
|`/`
|`exrootfs`

|`freebsd-swap`
|`4G`
|
|`exswap`

|`freebsd-ufs`
|`2G`
|`/var`
|`exvarfs`

|`freebsd-ufs`
|`1G`
|`/tmp`
|`extmpfs`

|`freebsd-ufs`
|соглашайтесь со значением по умолчанию (оставшаяся часть объема диска)
|`/usr`
|`exusrfs`
|===
====

После завершения создания необходимых разделов выберите btn:[Finish] для продолжения установки и перейдите к <<bsdinstall-fetching-distribution>>.

[[bsdinstall-part-zfs]]
=== Шаблонное формирование разделов с корневой файловой системой ZFS

Этот режим распределения работает исключительно с диском в целом и удаляет содержимого всего диска.
Главное меню конфигурации ZFS предоставляет определённое количество параметров, управляющих созданием пула.

[[bsdinstall-zfs-menu]]
.Меню формирования разделов ZFS
image::bsdinstall-zfs-menu.png[Меню, отображающее различные варианты для настройки пула ZFS]

Вот краткое описание вариантов, присутствующих в этом меню:

* `Install` - Продолжить установку с выбранными параметрами.
* `Pool Type/Disks` - Настроить `тип пула` и диск или диски, из которых этот пул будет состоять. На данный момент автоматический установщик ZFS поддерживает создание только единственного vdev верхнего уровня, за исключением режима поочерёдной записи. Для создания более сложных пулов воспользуйтесь указаниями в <<bsdinstall-part-shell>> по созданию пула.
* `Rescan Devices` - Обновить данные в списке доступных дисков.
* `Disk Info` - Это меню может быть использовано для изучения данных о каждом диске, включая его таблицу разделов и другую информацию, вроде идентификатора модели устройства и его серийного номера, если они доступны.
* `Pool Name` - Установка идентификатора для пула. По умолчанию в качестве имени используется _zroot_.
* `Force 4K Sectors?` - Принудительное использование секторов 4K. По умолчанию программа установки будет автоматически создавать разделы, границы которых кратны 4K, и явным образом укажет ZFS на использование секторов размером в 4K. Это безопасно даже при использовании дисков с размером сектора в 512 байт, и также даёт определённое преимущество, гарантируя то, что пулы, созданные на дисках с размером сектора в 512 байт, в будущем смогут работать с дисками с размером сектора в 4K, добавляемыми как для расширения пространства хранения, так и в качестве замены вышедших из строя дисков. Нажмите клавишу kbd:[Enter] для активации или отключения этого параметра.
* `Encrypt Disks?` - Шифрование дисков позволяет пользователю зашифровать диски при помощи GELI. Дополнительная информация о шифровании дисков имеется в crossref:disks[disks-encrypting-geli,“Шифрование диска с использованием geli”]. Нажмите клавишу kbd:[Enter] для активации или отключения этого параметра.
* `Partition Scheme` - Выбрать схему разделов. В большинстве случаев GPT является рекомендуемым вариантом. Нажмите клавишу kbd:[Enter] для выбора между различными вариантами.
* `Swap Size` - Устанавливает размер пространства подкачки.
* `Mirror Swap?` - Выполнять ли зеркалирование пространства подкачки между дисками. Имейте в виду, что включение зеркалирования пространства для подкачки приводит к неработоспособности функции создания аварийных образов системы. Нажмите клавишу kbd:[Enter] для активации или отключения этого параметра.
* `Encrypt Swap?` - Шифровать ли пространство подкачки. При этом будет выполняться шифрование пространства подкачки с использованием временного ключа при каждой загрузке системы и его сброс при перезагрузке. Нажмите клавишу kbd:[Enter] для активации или отключения этого параметра. Дополнительная информация о шифровании пространства подкачки имеется в crossref:disks[swap-encrypting,“Шифрование пространства подкачки”].

Выберите kbd:[T] для настройки `Типа пула` и дисков, из которых будет сформирован этот дисковый пул.

[[bsdinstall-zfs-vdev_type]]
.Тип пула ZFS
image::bsdinstall-zfs-vdev_type.png[Меню, запрашивающее тип виртуального устройства. К примеру, stripe, mirror, raidz1]

Вот краткое описание вариантов для `Pool Type`, которые могут быть выбраны в данном меню:

* `stripe` - Поочередная запись обеспечивает максимальный объём хранения на всех подключенных устройствах, но без избыточности. Если всего лишь один диск из пула выйдет из строя, то все данные данного пула теряются безвозвратно.
* `mirror` - При зеркалировании на каждом диске хранится полная копия всех данных. Зеркалирование обеспечивает хорошую производительность операций чтения, так как данные считываются со всех устройств параллельно. Производительность при записи хуже, так как данные должны быть записаны на все диски в пуле. Допускается выход из строя всех дисков, кроме одного остающегося. Этот вариант требует наличия по крайней мере двух дисков.
* `raid10` - Поочередная запись на зеркалированные диски. Обеспечивает наилучшую производительность, но наименьший объём пространства для хранения. Этот вариант требует чётного количества дисков и как минимум четырёх дисков.
* `raidz1` - RAID с одинарной избыточностью. Допускает одновременный выход из строя одного диска. Этот вариант требует по крайней мере трёх дисков.
* `raidz2` - RAID с двойной избыточностью. Допускает одновременный выход из строя двух дисков. Этот вариант требует по крайней мере четырёх дисков.
* `raidz3` - RAID с тройной избыточностью. Допускает одновременный выход из строя трёх дисков. Этот вариант требует по крайней мере пяти дисков.

Сразу после выбора параметра `Pool Type` отображается список доступных дисков, а у пользователя запрашивается выбор одного или большего количества дисков для формирования этого пула.
Затем конфигурация проверяется на предмет выбора достаточного количества дисков.
Если проверка завершилась неуспешно, выберите btn:[<Change Selection>] для возврата к списку дисков или btn:[<Back>] для изменения параметра `Pool Type`.

[[bsdinstall-zfs-disk_select]]
.Выбор диска
image::bsdinstall-zfs-disk_select.png[Меню, запрашивающее количество дисков, которое будет добавлено в дисковый пул]

[[bsdinstall-zfs-vdev_invalid]]
.Некорректный выбор
image::bsdinstall-zfs-vdev_invalid.png[Меню, указывающее на то, что было выбрано недостаточное количество дисков.]

В случае, если один или несколько дисков отсутствуют в списке, либо диски были подключены после запуска программы установки, выберите btn:[- Rescan Devices] для обновления списка доступных дисков.

[[bsdinstall-zfs-rescan-devices]]
.Повторное сканирование устройств
image::bsdinstall-zfs-rescan-devices.png[Повторное сканирование устройств]

Для того, чтобы избежать случайного удаления данных на неверно выбранном диске, можно воспользоваться меню btn:[- Disk Info] для проверки данных каждого диска, в том числе таблицы разделов и различной дополнительной информации, такой как номер модели устройства и его серийный номер, если он доступен.

[[bsdinstall-zfs-disk_info]]
.Анализ диска
image::bsdinstall-zfs-disk_info.png[Меню, показывающее информацию о разделах.]

Выберите kbd:[N] для настройки параметра `Pool Name`.
Введите желаемое название, затем выберите btn:[<OK>] для его установки или btn:[<Cancel>] для возврата в главное меню и использования имени, принятого по умолчанию.

[[bsdinstall-zfs-pool-name]]
.Идентификатор пула
image::bsdinstall-zfs-pool-name.png[Меню, запрашивающее идентификатор пула.]

Выберите kbd:[S] для указания размера раздела подкачки.
Введите желаемый объём пространства подкачки, а затем выберите btn:[<OK>] для установки этого значения или btn:[<Cancel>] для возврата в главное меню и установки объёма, принятого по умолчанию.

[[bsdinstall-zfs-swap-amount]]
.Размер пространства подкачки
image::bsdinstall-zfs-swap-amount.png[Меню, запрашивающее размер пространства подкачки]

После того, как для всех параметров будут установлены желаемые значения, выберите btn:[>>>Install] наверху меню.
После этого программа установки предложит воспользоваться последним шансом для отмены перед тем, как содержимое выбранных дисков будет уничтожено для создания пула ZFS.

[[bsdinstall-zfs-warning]]
.Последний шанс
image::bsdinstall-zfs-warning.png[Меню, указывающее пользователю на то, что данные будут потеряны]

Если было включено шифрование диска GELI, то программа установки дважды запросит парольную фразу, которая будет использоваться для шифрования дисков.
После этого начнётся инициализация шифрования.

[[bsdinstall-zfs-geli_password]]
.Пароль для шифрования дисков
image::bsdinstall-zfs-geli_password.png[Меню, запрашивающее пароль для шифрования устройств.]

[[bsdinstall-zfs-init-encription]]
.Инициализация шифрования
image::bsdinstall-zfs-init-encription.png[Меню, указывающее на то, что шифрование инициализируется.]

После этого установка продолжится в обычном режиме.
Для продолжения установки перейдите к <<bsdinstall-fetching-distribution>>.

[[bsdinstall-part-shell]]
=== Формирование разделов в режиме командной строки

При создании сложных конфигураций может оказаться, что различные меню для разбиения дисков программы установки bsdinstall не обеспечивают требуемого уровня гибкости.
Опытные пользователи могу выбрать вариант btn:[Shell] в меню формирования дисковых разделов для того, чтобы разбить диски в неавтоматизированном режиме, создать одну или несколько файловых систем, заполнить файл `/tmp/bsdinstall_etc/fstab` и смонтировать файловые системы в `/mnt`.
После того, как эти действия будут завершены, наберите команду `exit` для возврата в программу установки bsdinstall и продолжения установки.

[[bsdinstall-fetching-distribution]]
== Сгрузка дистрибутивных файлов

Продолжительность установки варьируется в зависимости от выбранного дистрибутива, способа установки и быстродействия компьютера.
Ход установки будет сопровождаться серией сообщений.

Сначала программа установки форматирует выбранный диск или диски и инициализирует разделы.
Затем, в случае использования носителя `bootonly` или `mini memstick`, она сгружает выбранные компоненты:

[[bsdinstall-distfile-fetching]]
.Скачивание файлов дистрибутива
image::bsdinstall-distfile-fetching.png[Меню, показывающее сгрузку различных компонентов.]

Далее выполняется проверка целостности файлов дистрибутива, чтобы удостовериться, что они не были повреждены во время сгрузки или чтения с установочного носителя:

[[bsdinstall-distfile-verify]]
.Проверка файлов дистрибутива
image::bsdinstall-distfile-verifying.png[Меню, отображающее проверку различных компонентов.]

И наконец, верифицированные дистрибутивные файлы распаковываются на диск:

[[bsdinstall-distfile-extract]]
.Извлечение файлов дистрибутива
image::bsdinstall-distfile-extracting.png[Меню, показывающее распаковку различных компонентов.]

Как только запрошенные файлы дистрибутива будут развёрнуты, программа установки отобразит первый постустановочный экран настройки.
Доступные постконфигурационные параметры описаны в следующем разделе.

[[bsdinstall-post]]
== Сетевые интерфейсы, учётные записи, часовой пояс, сервисы и усиленная защита

[[bsdinstall-post-root]]
=== Установка пароля пользователя `root`

В первую очередь должен быть установлен пароль пользователя `root`.
Во время ввода пароля набираемые символы не отображаются на экране.
Пароль должен быть введён два раза для исключения опечаток при наборе.

[[bsdinstall-post-set-root-passwd]]
.Установка пароля пользователя `root`
image::bsdinstall-post-root-passwd.png[Меню, отображающее запрос пароля для пользователя root.]

[[bsdinstall-network]]
== Сетевые интерфейсы

[[bsdinstall-config-network-dev]]
=== Настройка сетевых интерфейсов

Затем отображается список сетевых интерфейсов, обнаруженных на компьютере.
Выберите интерфейс для настройки.

[[bsdinstall-configure-net-interface]]
.Выбор сетевого интерфейса
image::bsdinstall-configure-network-interface.png[Меню, отображающее различные сетевые интерфейсы для настройки.]

Если был выбран интерфейс Ethernet, то программа установки перейдёт сразу к меню, показанному в <<bsdinstall-configure-net-ipv4>>.
Если был выбран беспроводной сетевой интерфейс, то вместо этого система будет осуществлять поиск беспроводных точек доступа:

[[bsdinstall-wireless-scan]]
.Поиск беспроводных точек доступа
image::bsdinstall-configure-wireless-scan.png[Меню, отображающее поиск беспроводных сетей.]

Беспроводные сети идентифицируются по SSID (Service Set Identifier), являющемуся кратким уникальным именем, которое присваивается каждой сети.
Найденные в результате поиска SSID отображаются вместе с описанием типов шифрования, поддерживаемых обнаруженными беспроводными сетями.
Если желаемый SSID не появляется в списке, то запустите сканирование повторно, выбрав btn:[Rescan].
Если искомая сеть всё так же не появляется в списке, проверьте соединение с антенной или попробуйте разместить компьютер ближе к точке доступа.
Запускайте повторный поиск после каждого изменения.

[[bsdinstall-wireless-accesspoints]]
.Выбор беспроводной сети
image::bsdinstall-configure-wireless-accesspoints.png[Меню, отображающее различные беспроводные сети для подключения.]

Затем введите информацию о шифровании, применяемом для подключения к выбранной беспроводной сети.
Настоятельно рекомендуется использовать шифрование типа WPA2 вместо более старых, типа WEP, имеющих низкий уровень безопасности.
Если сеть использует WPA2, то введите пароль, который также называют PSK (Pre-Shared Key).
По соображениям безопасности символы, набираемые в поле ввода, отображаются в виде звёздочек.

[[bsdinstall-wireless-wpa2]]
.Настройка WPA2
image::bsdinstall-configure-wireless-wpa2setup.png[Меню, запрашивающее пароль беспроводной сети.]

Затем выберите, требуется ли настройка адреса IPv4 для интерфейса Ethernet или беспроводного интерфейса:

[[bsdinstall-configure-net-ipv4]]
.Выберите настройку протокола IPv4
image::bsdinstall-configure-network-interface-ipv4.png[Меню, указывающее на выбор необходимости настройки IPv4 для выбранного интерфейса.]

Существуют два способа настройки IPv4.
DHCP автоматически и корректно конфигурирует сетевой интерфейс, и должен использоваться, если в сети имеется сервер DHCP.
В противном случае информация об адресации должна быть введена вручную в виде статической конфигурации.

[NOTE]
====
Не вводите произвольные сетевые данные, так как это не сработает.
Если сервер DHCP недоступен, выясните перечисленную в <<bsdinstall-collect-network-information>> информацию у сетевого администратора или поставщика услуг Интернет.
====

Если сервер DHCP доступен, то для автоматической настройки сетевого интерфейса выберите btn:[Yes] в следующем меню.
В работе программы установки произойдёт пауза продолжительностью примерно в минуту, в течение которой будет выполняться поиск сервера DHCP и получение информации об адресации для системы.

[[bsdinstall-net-ipv4-dhcp]]
.Выбор настройки протокола IPv4 посредством DHCP
image::bsdinstall-configure-network-interface-ipv4-dhcp.png[Меню, указывающее на выбор необходимости настройки DHCP для выбранного интерфейса.]

Если сервер DHCP недоступен, то выберите btn:[No] и введите следующую информацию об адресации в этом меню:

[[bsdinstall-net-ipv4-static]]
.Статическая настройка IPv4
image::bsdinstall-configure-network-interface-ipv4-static.png[Меню, запрашивающее данные для настройки сети IPv4.]

* `IP Address` - адрес IPv4, назначенный для этого компьютера. Этот адрес должен быть уникальным и не должен использоваться другим устройством в локальной сети.
* `Subnet Mask` - маска подсети, соответствующая данной сети.
* `Default Router` - адрес IP шлюза, используемого по умолчанию в данной сети.

На следующем экране будет отображён запрос на предмет необходимости настройки интерфейса на использование протокола IPv6.
Если IPv6 доступен и желателен, то выберите btn:[Yes] для подтверждения.

[[bsdinstall-net-ipv6]]
.Выбор настройки сети IPv6
image::bsdinstall-configure-network-interface-ipv6.png[Меню, указывающее на выбор необходимости настройки IPv6 для выбранного интерфейса.]

Для IPv6 также имеются два способа его настройки.
SLAAC (StateLess Address AutoConfiguration) в автоматическом режиме будет запрашивать информацию для корректной настройки у локального маршрутизатора.
Обратитесь к link:http://tools.ietf.org/html/rfc4862[rfc4862] для получения дополнительной информации.
Статичная конфигурация требует ручного ввода информации о сети.

Если доступен маршрутизатор IPv6, то выберите btn:[Yes] в следующем меню для автоматической настройки сетевого интерфейса.
В работе программы установки наступит пауза продолжительностью примерно в минуту, в течение которой будет выполняться поиск маршрутизатора и получение информации об адресации для системы.

[[bsdinstall-net-ipv6-slaac]]
.Выбор настройки IPv6 посредством SLAAC
image::bsdinstall-configure-network-interface-slaac.png[Меню, указывающее на выбор необходимости настройки SLAAC для выбранного интерфейса.]

Если маршрутизатор IPv6 недоступен, то выберите btn:[No] и введите следующую информацию об адресации в этом меню:

[[bsdinstall-net-ipv6-static]]
.Статичная настройка IPv6
image::bsdinstall-configure-network-interface-ipv6-static.png[Меню, запрашивающее данные для настройки сети IPv6.]

* `IPv6 Address` - адрес IPv6, который назначен этому компьютеру. Данный адрес должен быть уникальным и не должен использоваться другим устройством в локальной сети.
* `Default Router` - адрес шлюза IPv6, используемого по умолчанию в этой сети.

Последнее меню настройки сети используется для настройки преобразователя имён DNS (Domain Name System), который выполняет преобразование имён хостов в сетевые адреса и наоборот, преобразование сетевых адресов в имена хостов.
Если для автоматической настройки сетевого интерфейса использовались механизмы DHCP или SLAAC, то значения параметров преобразователя имён могут быть уже указаны в разделе `Resolver Configuration`.
Если это не так, то введите название домена локальной сети в поле `Search`.
`DNS #1` и `DNS #2` являются адресами IPv4 и/или IPv6 серверов DNS.
Необходим по крайней мере один сервер.

[[bsdinstall-net-dns-config]]
.Настройка преобразователя имён DNS
image::bsdinstall-configure-network-ipv4-dns.png[Меню, запрашивающее данные для настройки DNS для сети.]

После настройки интерфейса выберите зеркалирующий сервер, размещённый в том же регионе мира, что и компьютер, на который устанавливается FreeBSD.
Если зеркалирующий сервер расположен ближе к целевому компьютеру, то файлы могут быть получены быстрее, что сокращает время установки.

[TIP]
====
Выбор `ftp://download.freebsd.org (Main Site)` приведёт к автоматическому перенаправлению на ближайший зеркалирующий сервер.
====

[[bsdinstall-netinstall-mirror]]
.Выбор зеркалирующего сервера
image::bsdinstall-netinstall-mirrorselect.png[Меню, запрашивающее выбор зеркалирующего сервера в сети.]

[[bsdinstall-timezone]]
=== Настройка часового пояса

Последующий набор меню используется для корректного определения местного времени при помощи выбора географического региона, страны и часового пояса.
Указание часового пояса позволяет системе автоматически подстраиваться под такие изменения в региональных параметрах времени, как переходы на летнее время, а также выполнять другие функции, связанные с часовыми поясами, без нареканий.

Приводимый здесь пример подходит для машины, находящейся в материковом часовом поясе Испании в Европе.
Выбор будет отличаться в зависимости от географического местоположения.

[[bsdinstall-timezone-region]]
.Выберите регион
image::bsdinstall-timezone-region.png[Меню, запрашивающее регион часового пояса.]

Соответствующий регион выбирается при помощи клавиш навигации и подтверждается нажатием клавиши kbd:[Enter].

[[bsdinstall-timezone-country]]
.Выберите страну
image::bsdinstall-timezone-country.png[Меню, запрашивающее страну часового пояса.]

Выберите необходимую страну при помощи клавиш навигации и подтвердите выбор клавишей kbd:[Enter].

[[bsdinstall-timezone-zone]]
.Выберите часовой пояс
image::bsdinstall-timezone-zone.png[Меню, запрашивающее часовой пояс.]

Соответствующий часовой пояс выбирается клавишами навигации и подтверждается нажатием клавиши kbd:[Enter].

[[bsdinstall-timezone-confirmation]]
.Подтверждение выбора часового пояса
image::bsdinstall-timezone-confirm.png[Меню, запрашивающее подтверждение выбранного часового пояса.]

Подтвердите корректность выбора аббревиатуры для часового пояса.

[[bsdinstall-timezone-date]]
.Выберите дату
image::bsdinstall-timezone-date.png[Меню, запрашивающее системную дату.]

Подходящая дата выбирается с помощью клавиш навигации с последующим нажатием btn:[Set Date].
Либо выбор даты может быть пропущен при нажатии btn:[Skip].

[[bsdinstall-timezone-time]]
.Выберите время
image::bsdinstall-timezone-time.png[Меню, запрашивающее системное время.]

Подходящее время выбирается с помощью клавиш навигации с последующим нажатием btn:[Set Time].
Либо выбор времени может быть пропущен при нажатии btn:[Skip].

[[bsdinstall-sysconf]]
=== Активирование сервисов

Следующее меню используется для указания системных сервисов, которые будут запущены при загрузке системы.
Все эти сервисы являются необязательными.
Запускайте только те сервисы, что необходимы для работы системы.

[[bsdinstall-config-serv]]
.Выбор дополнительных активируемых сервисов
image::bsdinstall-config-services.png[Меню, отображающее различные доступные сервисы.]

Вот краткое описание сервисов, которые могут быть активированы в данном меню:

* `local_unbound` - Активирует запуск программного обеспечения unbound для сервиса DNS. Необходимо иметь в виду, что такая конфигурация предназначена для использования только в качестве локального кэширующего и перенаправляющего запросы сервиса преобразования имён. Если целью является настройка преобразователя имён для всей сети, установите package:dns/unbound[].
* `sshd` - Даемон Secure Shell (SSH) используется для дистанционного доступа в систему с использованием зашифрованного соединения.  Активируйте этот сервис только если система должна быть доступна для входа в неё в дистанционном режиме.
* `moused` - Включите этот сервис, если на системной консоле в режиме командной строки будет использоваться мышь.
* `ntpdate` - Включает автоматическую синхронизацию времени во время загрузки. Заметьте, что функциональность данной программы в настоящее время доступна в даемоне man:ntpd[8], а утилита man:ntpdate[8] вскоре будет исключена из использования.
* `ntpd` - Даемон протокола NTP (Network Time Protocol) для автоматической синхронизации времени.  Активируйте этот сервис, если вы хотите синхронизировать системные часы с удалённым сервером времени или пулом таких серверов.
* `powerd` - Системная утилита для контроля потребляемой мощности и профилей энергосбережения.
* `dumpdev` - Аварийные образы системы полезны при устранении неполадок, поэтому пользователи призываются к включению этого параметра.

[[bsdinstall-hardening]]
=== Включение усиленных параметров безопасности

Следующее меню используется для настройки того, какие параметры безопасности будут активированы.
Все из этих вариантов являются необязательными.
Однако их использование поощряется.

[[bsdinstall-hardening-options]]
.Выбор усиленных параметров безопасности
image::bsdinstall-hardening.png[Меню, показывающее различные варианты усиленных параметров безопасности.]

Вот краткий обзор параметров, которые могут быть активированы в данном меню:

* `hide_uids` - Скрывать процессы, работающие с полномочиями других пользователей (UID). Это ограничивает просмотр непривилегированными пользователями процессов других пользователей.
* `hide_gids` - Скрывать процессы, работающие с полномочиями других групп пользователей. Это ограничивает просмотр непривилегированными пользователями процессов других групп пользователей (GID).
* `hide_jail` - Скрывать процессы, работающие в изоляторах. Это ограничивает просмотр непривилегированными пользователями процессов, работающих в изоляторах.
* `read_msgbuf` - Отключить чтение буфера сообщений ядра непривилегированными пользователями. Это ограничивает использование man:dmesg[8] непривилегированными пользователями для просмотра сообщений из буфера журнала ядра.
* `proc_debug` - Отключить функции отладки процессов для непривилегированных пользователей.  Отключает различные непривилегированные сервисы межпроцессной отладки, в том числе часть функциональности procfs, `ptrace()` и `ktrace()`. Пожалуйста, обратите внимание, что это также ограничивает работу таких инструментов отладки, как man:lldb[1], man:truss[1] и man:procstat[1], а также некоторых встроенных средств отладки в определённых скриптовых языках программирования, подобных PHP.
* `random_pid` - Случайный выбор PID для процессов.
* `clear_tmp` - Очистка `/tmp` при загрузке системы.
* `disable_syslogd` - Отключение открытия сетевого порта syslogd. По умолчанию FreeBSD запускает syslogd в безопасном режиме с параметром `-s`. Это не позволяет этому даемону получать информацию о UDP-запросах, поступающих на порт 514. При включении данного параметра syslogd вместо этого будет запускаться с параметром `-ss`, который не позволяет syslogd открывать какие бы то ни было порты. Для получения более полной информации обратитесь к man:syslogd[8].
* `disable_sendmail` - Отключение почтового транспортного агента sendmail.
* `secure_console` - Заставляет системное приглашение требовать ввода пароля пользователя `root` при переходе в однопользовательский режим.
* `disable_ddtrace - DTrace может функционировать в режиме, влияющем на работающее ядро. Деструктивные действия не могут быть выполнены, если только они не разрешены явным образом. Для включения этого режима при использовании DTrace воспользуйтесь параметром `-w`. Для получения дополнительной информации обратитесь к man:dtrace[1].
* `enable_aslr` - Включает случайный выбор адресов. Для получения дополнительной информации о случайном выборе адресов можно обратиться к link:https://en.wikipedia.org/wiki/Address_space_layout_randomization[статье в Wikipedia].

[[bsdinstall-addusers]]
=== Добавление пользователей

В следующем меню запрашивается создание по крайней мере одной пользовательской учётной записи.
Рекомендуется выполнять вход в систему с использованием пользовательской учётной записи, а не `root`.
Работа в системе с правами пользователя `root` особенна тем, что по существу нет ограничений или защиты от действий пользователя.
Вход под обычным пользователем является более безопасным и более защищённым.

Для добавления новых пользователей выберите btn:[Yes].

[[bsdinstall-add-user1]]
.Добавление учётных записей пользователей
image::bsdinstall-adduser1.png[Меню, запрашивающее, требуется ли добавление пользователя в систему.]

Следуйте указаниям и введите запрашиваемую информацию об учётной записи.
Пример, показанный в <<bsdinstall-add-user2>>, создаёт учётную запись `asample`.

[[bsdinstall-add-user2]]
.Ввод информации о пользователе
image::bsdinstall-adduser2.png[Меню, запрашивающее различную информацию о новом пользователе.]

Вот краткое описание вводимой информации:

* `Username` - Имя, которое будет вводить пользователь для входа в систему.  Популярной практикой является использование первой буквы имени и фамилии, при этом в системе все имена пользователей должны быть уникальными.  Имя пользователя чувствительно к регистру и не должно содержать пробелов.

 Часто оно формируется из объединенных вместе первой буквы имени и фамилии.
* `Full name` - Полное имя пользователя.  Оно может содержать пробелы и используется в качестве описания учётной записи пользователя.
* `Uid` - Идентификатор пользователя. Обычно это поле не заполняется, и система сама присваивает ему какое-то значение.
* `Login group` - Имя группы для этого пользователя.  Обычно это поле остаётся незаполненным для того, чтобы использовать значение по умолчанию.
* `Invite _user_ into other groups?` - Дополнительные группы, в которые будет включён пользователь.  Если пользователю необходим административный доступ, наберите здесь `wheel`.
* `Login class` - Обычно оставляется пустым для принятия значения по умолчанию.
* `Shell` - Введите одно из перечисленных значений для установки интерактивной оболочки командной строки для этого пользователя.  Обратитесь к crossref:basics[shells,Оболочки] для получения дополнительной информации о командных процессорах.
* `Home directory` - Домашний каталог пользователя. Как правило, значение по умолчанию является корректным.
* `Home directory permissions` - Права на домашний каталог пользователя. Значение по умолчанию является корректным в большинстве случаев.
* `Use password-based authentication?` - Обычно `yes`, чтобы у пользователей запрашивался пароль при входе в систему.
* `Use an empty password?` - Обычно `no`, так как пустые или отсутствующие пароли небезопасны.
* `Use a random password?` - Обычно `no`, при этом пользователь может установить собственный пароль на последующем шаге.
* `Enter password` - Пароль для этого пользователя.  Набираемые символы не будут отображаться на экране.
* `Enter password again` - Пароль необходимо ввести еще раз (для сверки).
* `Lock out the account after creation?` - Обычно `no`, чтобы пользователь смог войти в систему.

После ввода всей этой подробной информации отображается краткий свод для проверки.
Если была допущена ошибка, то введите `no` для её исправления.
Как только всё будет указано корректно, введите `yes` для создания новой учётной записи пользователя.

[[bsdinstall-add-user3]]
.Заполненная форма ввода информации о новом пользователе
image::bsdinstall-adduser3.png[Меню, отображающее информацию о новом пользователе и запрашивающее, всё ли корректно.]

Ответьте `yes` на вопрос `Add another user?`, если нужно создать дополнительных пользователей.
Для завершения добавления пользователей и продолжения послеустановочной настройки выберите `no`.

За дополнительной информацией о добавлении пользователей и управлении ими обратитесь к crossref:basics[users-synopsis,Пользователи и основы управления учётными записями].

[[bsdinstall-final-conf]]
=== Завершение настройки

После того, как установка и конфигурирование завершены, вам предоставляется заключительная возможность подкорректировать настройки.

[[bsdinstall-final-config]]
.Финальное конфигурационное меню
image::bsdinstall-finalconfiguration.png[Меню, демонстрирующее различные варианты действий до завершения установки. К примеру, добавление пользователя, настройка часового пояся и так далее.]

Используйте это меню для внесения любых изменений или для выполнения дополнительных настроек перед завершением установки.

* `Add User` - Описывается в <<bsdinstall-addusers>>.
* `Root Password` - Описывается в <<bsdinstall-post-root>>.
* `Hostname` - Описывается в <<bsdinstall-hostname>>.
* `Network` - Описывается в <<bsdinstall-config-network-dev>>.
* `Services` - Описывается в <<bsdinstall-sysconf>>.
* `System Hardening` - Описывается в <<bsdinstall-hardening>>.
* `Time Zone` - Описывается в <<bsdinstall-timezone>>.
* `Handbook` - Загрузка и установка Руководства FreeBSD.

После завершения настройки выберите btn:[Exit].

[[bsdinstall-final-modification-shell]]
.Ручная настройка
image::bsdinstall-final-modification-shell.png[Меню, указывающее на то, что установка завершена. А также запрашивающее, требуется ли вам запустить командный процессор для внесения изменений в режиме ручного управления.]

bsdinstall выдаст запрос на дополнительные настройки, которые необходимо выполнить до перезагрузки в новую систему.
Для входа в командный интерпретатор новой системы выберите btn:[Yes], а для перехода к последнему шагу установки нажмите btn:[No].

[[bsdinstall-final-main]]
.Завершение установки
image::bsdinstall-mainexit.png[Меню, указывающее на то, что установка завершена, и запрашивающее, требуется ли перезагрузка системы или нужен доступ к Live CD.]

Если требуется дополнительная настройка или особая конфигурация, выберите btn:[Live CD] для загрузки с установочного носителя в режиме Live CD.

Если установка завершена, для перезагрузки компьютера и запуска новой системы FreeBSD выберите btn:[Reboot].
Не забудьте извлечь установочный носитель FreeBSD, иначе компьютер может снова с него загрузиться.

Во время загрузки FreeBSD отображаются информационные сообщения.
После завершения загрузки системы будет отображено приглашение к входу.
В приглашении `login:` введите имя пользователя, добавленного при установке.
Избегайте входа в систему как `root`.
Обратитесь к crossref:basics[users-superuser,Учётная запись суперпользователя] за инструкциями относительно того, как стать суперпользователем в том случае, когда необходим административный доступ.

Сообщения, которые отображаются во время загрузки, могут быть просмотрены после нажатия kbd:[Scroll-Lock], которое включает режим буфера прокрутки.
Клавиши kbd:[PgUp], kbd:[PgDn], а также клавиши навигации могут быть задействованы для прокрутки сообщений.
После завершения просмотра нажмите kbd:[Scroll-Lock] повторно, чтобы разблокировать дисплей и вернуться в консоль.
Для просмотра этих сообщений после того, как система уже поработала какое-то время, наберите `less /var/run/dmesg.boot` в командной строке.
Для возврата к командной строке после просмотра сообщений нажмите kbd:[q].

Если в <<bsdinstall-config-serv>> был активирован sshd, то первая загрузка может выполняться несколько медленнее, так как система будет формировать серверные ключи SSH.
Последующие загрузки будут осуществляться быстрее.
Затем будут отображены отпечатки этих ключей, как показано в следующем примере:

[source,shell]
....
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
10:a0:f5:af:93:ae:a3:1a:b2:bb:3c:35:d9:5a:b3:f3 root@machine3.example.com
The key's randomart image is:
+--[RSA1 1024]----+
|    o..          |
|   o . .         |
|  .   o          |
|       o         |
|    o   S        |
|   + + o         |
|o . + *          |
|o+ ..+ .         |
|==o..o+E         |
+-----------------+
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
7e:1c:ce:dc:8a:3a:18:13:5b:34:b5:cf:d9:d1:47:b2 root@machine3.example.com
The key's randomart image is:
+--[ DSA 1024]----+
|       ..     . .|
|      o  .   . + |
|     . ..   . E .|
|    . .  o o . . |
|     +  S = .    |
|    +  . = o     |
|     +  . * .    |
|    . .  o .     |
|      .o. .      |
+-----------------+
Starting sshd.
....

Обратитесь к <<openssh>> для получения дополнительной информации об отпечатках и SSH.

По умолчанию во FreeBSD не выполняется установка графического окружения.
Обратитесь к crossref:x11[x11,The X Window System] за дополнительной информацией об установке и настройке графического оконного менеджера.

Корректное завершение работы компьютера с FreeBSD помогает защитить от повреждений данные и оборудование.
_Не выключайте электропитание до полного завершения работы системы!_
Если ваш пользователь входит в группу `wheel`, то перейдите в режим суперпользователя, набрав в командной строке команду `su` и введя пароль пользователя `root`.
Затем наберите команду `shutdown -p now`, после чего система корректно завершит работу и, если оборудование это поддерживает, выключится.

[[bsdinstall-install-trouble]]
== Решение проблем

Этот раздел описывает базовые приёмы устранения распространённых проблем, возникающих при установке, о которых часто сообщают пользователи.

Просмотрите Информацию об оборудовании из списка, представленного на странице link:https://www.FreeBSD.org/releases/[Информации о релизах FreeBSD], в соответствии с версией FreeBSD, чтобы убедиться в поддержке оборудования.

[NOTE]
====
Некоторых проблем с установкой можно избежать или уменьшить за счёт обновления микропрограммного обеспечения различных аппаратных компонентов, особенно материнских плат.
Встроенное микропрограммное обеспечение материнской платы обычно называют BIOS.
У большинства производителей материнских плат и компьютеров есть веб-сайты, содержащие как информацию об обновлениях, так и сами обновления.

В общем, производители не рекомендуют обновлять BIOS материнской платы, если на то нет веских причин, например, таких как появление критически важного обновления. Процесс обновления _может_ потерпеть неудачу, тем самым оставив BIOS поврежденным, а компьютер - нерабочим.
====

Если система зависает во время загрузки на этапе обнаружения устройств или ведёт себя странно в процессе установки, то причиной может быть ACPI.
FreeBSD широко использует системные сервисы ACPI на платформах i386 и amd64 в качестве вспомогательных при конфигурировании оборудования, если такие сервисы обнаруживаются во время загрузки.
К сожалению, до сих пор существуют неполадки как в драйвере ACPI, так и среди материнских плат и их BIOS.
ACPI может быть отключена путём установки значения переменной `hint.acpi.0.disabled` на третьем этапе загрузки:

[source,shell]
....
set hint.acpi.0.disabled="1"
....

Это значение сбрасывается каждый раз при загрузке системы, поэтому строку `hint.acpi.0.disabled="1"` необходимо добавить в файл `/boot/loader.conf`.
Дополнительную информацию о загрузчике можно найти в разделе crossref:boot[boot-synopsis,“Описание”].

[[using-live-cd]]
== Использование Live CD

Приветственное меню bsdinstall, показанное в <<bsdinstall-choose-mode>>, содержит вариант btn:[Live CD].
Он удобен для тех пользователей, которые всё еще размышляют о том, насколько FreeBSD будет для них правильным выбором и желают проверить некоторые функциональные возможности до её установки.

До перехода к использованию варианта btn:[Live CD] необходимо отметить следующее:

* Для получения доступа к системе необходимо осуществить аутентификацию. Имя пользователя - `root`, пароль отсутствует.
* Так как система работает непосредственно с установочного носителя, её производительность будет существенно ниже системы, установленной на жёсткий диск.
* В этом варианте предоставляется только интерфейс командной строки, графический интерфейс отсутствует.
